{% extends 'base.html' %}
{% block title %}Tooling ‚Äî List{% endblock %}

{% block content %}
<h1 class="mb-3">Tooling ‚Äî STATUS BATCH#</h1>

<div class="d-flex gap-2 mb-3 flex-wrap align-items-center">
  <a class="btn btn-primary" href="{{ url_for('tooling.tooling_event') }}">‚ûï New Event</a>
  <a class="btn btn-outline-secondary" href="{{ url_for('tooling.tooling_new') }}">New BATCH #</a>
  <a class="btn btn-outline-success" href="{{ url_for('tooling.export_csv') }}">‚¨á Export CSV</a>
  <a class="btn btn-outline-success" href="{{ url_for('tooling.import_tooling') }}">‚¨Ü Import CSV</a>
  <a class="btn btn-outline-info" href="{{ url_for('tooling.report_installed') }}">üìä REPORT: on BM#</a>

  <!-- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ BATCH # –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è Tooling -->
  <form class="ms-auto input-group" action="{{ url_for('tooling.tooling_search') }}" method="get" style="max-width:420px">
    <input name="q" class="form-control" placeholder="Search by BATCH #">
    <button class="btn btn-outline-primary">Search</button>
  </form>
</div>

{% if rows|length == 0 %}
  <div class="alert alert-info">–ü–æ–∫–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –æ—Å–Ω–∞—Å—Ç–∫–µ. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π BATCH #.</div>
{% else %}
<div class="table-responsive">
  <table class="table table-sm table-hover align-middle">
    <thead class="table-light">
      <tr>
        <th>BATCH #</th>
        <th>LAST DATE</th>
        <th>LAST ACTION</th>
        <th>STATUS</th>
        <th>BM#</th>
        <th>ROLE</th>
        <th>POSITION</th>
        <th>DIM</th>
        <th>NEW DIM</th>
      </tr>
    </thead>
    <tbody>
      {% for r in rows %}
        <tr>
          <td>
            {% if r.get('id') %}
              <a href="{{ url_for('tooling.tooling_detail', tool_id=r['id']) }}">{{ r["BATCH #"] }}</a>
            {% else %}
              {{ r["BATCH #"] }}
            {% endif %}
          </td>
          <td>{{ r["LAST DATE"] or '' }}</td>
          <td>{{ r["LAST ACTION"] or '' }}</td>
          <td>
            <span class="badge text-bg-{{ 'success' if r['STATUS']=='INSTALLED' else 'secondary' }}">
              {{ r["STATUS"] or '' }}
            </span>
          </td>
          <td>{{ r["BM#"] or '' }}</td>
          <td>{{ r["ROLE"] or '' }}</td>
          <td>{{ r["POSITION"] or '' }}</td>
          <td>{{ r["DIM"] or '' }}</td>
          <td>{{ r["NEW DIM"] or '' }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endif %}
{% endblock %}
